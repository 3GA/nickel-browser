Index: src/chrome/browser/gtk/browser_window_gtk.cc
===================================================================
--- src.orig/chrome/browser/gtk/browser_window_gtk.cc	2010-10-25 16:58:06.000000000 +0200
+++ src/chrome/browser/gtk/browser_window_gtk.cc	2010-10-25 16:59:31.000000000 +0200
@@ -816,20 +816,7 @@
   if (fullscreen) {
     gtk_window_fullscreen(window_);
   } else {
-    // Work around a bug where if we try to unfullscreen, metacity immediately
-    // fullscreens us again.  This is a little flickery and not necessary if
-    // there's a gnome-panel, but it's not easy to detect whether there's a
-    // panel or not.
-    std::string wm_name;
-    bool unmaximize_before_unfullscreen = IsMaximized() &&
-        x11_util::GetWindowManagerName(&wm_name) && wm_name == "Metacity";
-    if (unmaximize_before_unfullscreen)
-      UnMaximize();
-
     gtk_window_unfullscreen(window_);
-
-    if (unmaximize_before_unfullscreen)
-      gtk_window_maximize(window_);
   }
 }
 
